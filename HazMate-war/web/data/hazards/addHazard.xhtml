<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <body>

        <ui:composition template="./../../templates/masterTemplate.xhtml">

            <ui:define name="content">
                <f:view>

                    <br></br>
                    <h:form>
                        <div class="pagePath"><p:outputLabel value="You are here : #{pagePath_MB.pagePath}"/></div>
                        <br></br>
                        <br></br>
                        <p:growl id="growl" showDetail="true" showSummary="false" autoUpdate="true"/>
                        <p:accordionPanel  id="addTable" styleClass="accordionWidth" multiple="true">
                            <p:tab title="Hazard" >
                                <p:panelGrid columns="2">
                                    <p:outputLabel for="hazardDate" value="Hazard Date:" />
                                    <p:calendar id="hazardDate" value="#{addHazard_MB.hazardObject.hazardDate}" title="HazardDate" required="true" requiredMessage="The HazardDate field is required." maxdate="#{addHazard_MB.todaysDate()}" />
                                    <p:outputLabel value="Hazard Description:" for="hazardDescription" />
                                    <p:inputTextarea rows="4" cols="60" id="hazardDescription" value="#{addHazard_MB.hazardObject.hazardDescription}" title="HazardDescription" required="true" requiredMessage="The HazardDescription field is required."/>
                                    <p:outputLabel value="Hazard Comment:" for="hazardComment" />
                                    <p:inputTextarea rows="4" cols="60" id="hazardComment" value="#{addHazard_MB.hazardObject.hazardComment}" title="HazardComment" />
                                    <p:outputLabel value="Hazard Workshop:" for="hazardWorkshop" />
                                    <p:inputTextarea rows="4" cols="60" id="hazardWorkshop" value="#{addHazard_MB.hazardObject.hazardWorkshop}" title="HazardWorkshop" required="true" requiredMessage="The HazardWorkshop field is required."/>
                                    <p:outputLabel value="Hazard Review:" for="hazardReview" />
                                    <p:selectOneMenu id="hazardReview" value="#{addHazard_MB.hazardObject.hazardReview}" required="true" requiredMessage="The HazardReview field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItem itemLabel="Yes" itemValue="Y"/>
                                        <f:selectItem itemLabel="No" itemValue="N"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Risk class" for="riskClass"/>
                                    <p:selectOneMenu id="riskClass" value="#{addHazard_MB.riskClassId}" required="true" requiredMessage="The Risk class field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItems value="#{addHazard_MB.listDbRiskClass}" var="riskClassItem" itemLabel="#{riskClassItem.riskClassName}" itemValue="#{riskClassItem.riskClassId}"/> 
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Hazard Activity:" for="hazardActivity" />
                                    <p:selectOneMenu id="hazardActivity" value="#{addHazard_MB.activityId}" required="true" requiredMessage="The HazardActivity field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItems value="#{addHazard_MB.listDbHazardActivity}" var="activityItem" itemLabel="#{activityItem.activityName}" itemValue="#{activityItem.activityId}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Hazard Location:" for="hazardLocation" />
                                    <p:selectOneMenu id="hazardLocation" value="#{addHazard_MB.locationId}" required="true" requiredMessage="The HazardLocation field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItems value="#{addHazard_MB.listDbLocation}" var="locationItem" itemLabel="#{locationItem.locationName}" itemValue="#{locationItem.locationId}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Hazard Status Id:" for="hazardStatusId" />
                                    <p:selectOneMenu id="hazardStatusId" value="#{addHazard_MB.statusId}" required="true" requiredMessage="The HazardStatusId field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItems value="#{addHazard_MB.listDbHazardStatus}" var="statusItem" itemLabel="#{statusItem.hazardStatusName}" itemValue="#{statusItem.hazardStatusId}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Hazard Type Id:" for="hazardTypeId" />
                                    <p:selectOneMenu id="hazardTypeId" value="#{addHazard_MB.typeId}" required="true" requiredMessage="The HazardTypeId field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItems value="#{addHazard_MB.listDbhazardType}" var="typeItem" itemLabel="#{typeItem.hazardTypeName}" itemValue="#{typeItem.hazardTypeId}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Owner Id:" for="ownerId" />
                                    <p:selectOneMenu id="ownerId" value="#{addHazard_MB.ownerId}" required="true" requiredMessage="The OwnerId field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItems value="#{addHazard_MB.listDbOwners}" var="ownersItem" itemLabel="#{ownersItem.ownerName}" itemValue="#{ownersItem.ownerId}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Hazard Context Id:" for="hazardContextId" />
                                    <p:selectOneMenu id="hazardContextId" value="#{addHazard_MB.hazardContextId}" required="true" requiredMessage="The HazardContextId field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItems value="#{addHazard_MB.listDbHazardContext}" var="hazardContextItem" itemLabel="#{hazardContextItem.hazardContextName}" itemValue="#{hazardContextItem.hazardContextId}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Risk Frequency Id:" for="riskFrequencyId" />
                                    <p:selectOneMenu id="riskFrequencyId" value="#{addHazard_MB.freqId}" required="true" requiredMessage="The RiskFrequencyId field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItems value="#{addHazard_MB.listDbRiskFrequency}" var="riskFreqItem" itemLabel="#{riskFreqItem.frequencyScore}" itemValue="#{riskFreqItem.riskFrequencyId}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Risk Severity Id:" for="riskSeverityId" />
                                    <p:selectOneMenu id="riskSeverityId" value="#{addHazard_MB.severityId}" required="true" requiredMessage="The RiskSeverityId field is required.">
                                        <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                        <f:selectItems value="#{addHazard_MB.listDbRiskSeverity}" var="riskSeverityItem" itemLabel="#{riskSeverityItem.severityScore}" itemValue="#{riskSeverityItem.riskSeverityId}"/>
                                    </p:selectOneMenu>
                                    <p:outputLabel value="Legacy Id:" for="legacyId"/>
                                    <p:inputText id="legacyId" value="#{addHazard_MB.hazardObject.legacyId}" title="Legacy Id"/>
                                </p:panelGrid>
                            </p:tab>
                            <p:tab title="SBS">
                                <p:tree value="#{addHazard_MB.root}" var="doc"
                                        selectionMode="checkbox"
                                        selection="#{addHazard_MB.selectedNodes}" dynamic="true">
                                    <p:treeNode>
                                        <p:outputLabel value="#{doc}" />
                                    </p:treeNode>
                                </p:tree>
                            </p:tab>
                        </p:accordionPanel>

                        <br/>

                        <p:commandButton value="Save Hazard">
                            <f:ajax listener="#{addHazard_MB.addHazardSBS(addHazard_MB.selectedNodes)}" execute="@form" render="@form"/>
                        </p:commandButton>



                    </h:form>
                </f:view>

            </ui:define>

        </ui:composition>

    </body>
</html>
